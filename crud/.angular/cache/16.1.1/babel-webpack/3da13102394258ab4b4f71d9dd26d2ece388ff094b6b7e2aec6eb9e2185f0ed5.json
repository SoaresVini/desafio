{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let CadastroUserComponent = class CadastroUserComponent {\n  constructor(service, route, router, formBuilder, edit) {\n    this.service = service;\n    this.route = route;\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.edit = edit;\n  }\n  /*\n   const id = this.route.snapshot.paramMap.get('id') testa issso da e se for True ele passa os dados do usuario para o formulario igual no editar, se não foca como tá aqui mesmo\n  */\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (id) {\n      this.service.buscarUser(parseInt(id)).subscribe(user => {\n        this.formulario = this.formBuilder.group({\n          id: [id],\n          name: [user.name],\n          age: [user.age],\n          birthday: [user.birthday],\n          phoneNumber: [user.phoneNumber],\n          address: [user.address]\n        });\n      });\n    } else {\n      this.formulario = this.formBuilder.group({\n        name: ['', [Validators.required, Validators.minLength(2)]],\n        age: ['', [Validators.required]],\n        birthday: ['', [Validators.required]],\n        phoneNumber: [''],\n        address: ['', [Validators.required]]\n      });\n    }\n  }\n  usuario() {\n    this.aniversario();\n    if (this.formulario.valid) {\n      this.service.criar(this.formulario.value).subscribe(() => {\n        this.router.navigate(['/listarUsers']);\n      });\n    } else {}\n  }\n  aniversario() {\n    const date = new Date();\n    const dataAniversario = new Date(this.formulario.controls['birthday'].value);\n    const idade = date.getFullYear() - dataAniversario.getFullYear();\n    this.formulario.controls['age'].setValue(idade);\n  }\n};\nCadastroUserComponent = __decorate([Component({\n  selector: 'app-cadastro-user',\n  templateUrl: './cadastro-user.component.html',\n  styleUrls: ['./cadastro-user.component.scss']\n})], CadastroUserComponent);","map":{"version":3,"names":["Component","Validators","CadastroUserComponent","constructor","service","route","router","formBuilder","edit","ngOnInit","id","snapshot","paramMap","get","buscarUser","parseInt","subscribe","user","formulario","group","name","age","birthday","phoneNumber","address","required","minLength","usuario","aniversario","valid","criar","value","navigate","date","Date","dataAniversario","controls","idade","getFullYear","setValue","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/joinin/project/desafio/crud/src/app/componentes/users/cadastro-user/cadastro-user.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { filter } from 'rxjs';\nimport { UserService } from 'src/app/service/user-service.service';\nimport { validatorTelefone } from './validatorTelefone'\n\n@Component({\n  selector: 'app-cadastro-user',\n  templateUrl:'./cadastro-user.component.html',\n  styleUrls: ['./cadastro-user.component.scss']\n})\nexport class CadastroUserComponent implements OnInit{\n\n  formulario!: FormGroup\n  \n\n  constructor(\n    private service: UserService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private formBuilder: FormBuilder,\n    private edit : boolean\n  ){}\n\n  /*\n   const id = this.route.snapshot.paramMap.get('id') testa issso da e se for True ele passa os dados do usuario para o formulario igual no editar, se não foca como tá aqui mesmo\n  */\n\n  ngOnInit(): void {\n    const id = this.route.snapshot.paramMap.get('id')\n    if(id){\n      this.service.buscarUser(parseInt(id!)).subscribe((user) => {\n        this.formulario = this.formBuilder.group({\n          id:[id],\n          name:[user.name],\n          age: [user.age],\n          birthday:[user.birthday],\n          phoneNumber:[user.phoneNumber],\n          address: [user.address]\n        })\n      }\n    )\n    }else{\n      this.formulario = this.formBuilder.group({\n        name:['',[\n          Validators.required,\n          Validators.minLength(2)\n        ]],\n  \n        age: ['', [\n          Validators.required]],\n        birthday:['', [\n          Validators.required]],\n        phoneNumber:[''],\n        address: ['', [Validators.required]]\n      })\n  \n    }\n\n  }\n\nusuario(){\n\n  this.aniversario()\n  if(this.formulario.valid){\n    this.service.criar(this.formulario.value).subscribe(() => {\n      this.router.navigate(['/listarUsers'])\n    })\n  }else{\n\n  }\n}\n\naniversario(){\n\n  const date = new Date()\n  const dataAniversario = new Date(this.formulario.controls['birthday'].value)\n\n  const idade:number = date.getFullYear() - dataAniversario.getFullYear()\n\n  this.formulario.controls['age'].setValue(idade)\n\n}\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}